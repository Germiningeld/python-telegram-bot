# Telegram Support Bot

Бот для организации технической поддержки через Telegram. Позволяет пользователям общаться с операторами через отдельные темы в группе поддержки.

## Функциональность

### Основные функции:

1. **Обработка сообщений пользователей**:
   - Пользователь пишет боту
   - Бот создает новую тему в группе поддержки для каждого нового пользователя
   - Сообщение пользователя пересылается в соответствующую тему

2. **Обработка ответов операторов**:
   - Оператор отвечает в теме группы
   - Бот пересылает ответ пользователю
   - Каждая тема в группе соответствует отдельному пользователю

3. **Управление темами**:
   - Автоматическое создание новых тем для новых пользователей
   - Сохранение соответствия между пользователями и темами
   - Каждый пользователь имеет свою отдельную тему

## Установка

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/yourusername/telegram-support-bot.git
   cd telegram-support-bot
   ```

2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

3. Создайте файл `.env` в корневой директории проекта и добавьте следующие переменные:
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   SUPPORT_GROUP_ID=your_supergroup_id_here
   ```

## Подготовка группы поддержки

1. Создайте супергруппу в Telegram
2. Включите поддержку тем в настройках группы
3. Добавьте бота в группу и сделайте его администратором
4. Получите ID группы (можно использовать @username_to_id_bot или отправить сообщение в группу и перехватить его через API)
5. Добавьте ID группы в файл `.env`

## Запуск бота

```
python bot.py
```

## Использование

### Команды бота:
1. `/start` - приветственное сообщение
2. `/help` - инструкция по использованию

### Для пользователей:
- Пользователь просто отправляет сообщение боту
- Все ответы от операторов будут приходить через бота

### Для операторов поддержки:
- Сообщения от пользователей появляются в отдельных темах в группе поддержки
- Операторы отвечают непосредственно в этих темах
- Ответы автоматически пересылаются пользователю

## Требования

- Python 3.7+
- Доступ к API Telegram
- Супергруппа в Telegram с включенными темами

## Структура проекта

```
project/
├── bot.py           # Основной код бота
├── config.py        # Конфигурация и настройки
├── requirements.txt # Зависимости
├── .env             # Конфиденциальные данные
└── user_topic_mapping.json  # Файл соответствий пользователь ↔ тема (создается автоматически)
```

## Примечания

- Бот пересылает сообщения без дополнительной информации о том, куда уходят сообщения
- Необходимо, чтобы бот имел права администратора в группе поддержки
- Группа должна быть супергруппой с включенными темами